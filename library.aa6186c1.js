!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},o=t.parcelRequiree717;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequiree717=o);var a=o("bpxeT"),i=o("2TvXO");o("bTMks"),o("h6c0i");var c={library:document.querySelector(".gallery--library"),footerLink:document.querySelector(".footer__link"),footerBackDrop:document.querySelector(".footer__backdrop"),footerCloseBtn:document.querySelector("[data-modal-close]"),watchBtn:document.querySelector(".button-watched"),queueBtn:document.querySelector(".button-queue")},s=o("3Dz6Y"),u=o("X3bd8"),l=o("d1Qha"),d=o("ddUeE"),p=o("2ZtFH");function f(){c.footerBackDrop.classList.add("is-hidden"),h()}function v(e){"Escape"!==e.key&&e.target!==c.footerBackDrop||(c.footerBackDrop.classList.add("is-hidden"),h())}function h(){document.removeEventListener("keydown",v),c.footerBackDrop.removeEventListener("click",v),c.footerCloseBtn.removeEventListener("click",f),document.querySelector("body").classList.remove("noScroll")}var m=new(0,u.ThemoviedbAPI);try{(0,d.spinnerPlay)(),y(),c.footerLink.addEventListener("click",(function(){c.footerBackDrop.classList.remove("is-hidden"),document.querySelector("body").classList.add("noScroll"),document.addEventListener("keydown",v),c.footerBackDrop.addEventListener("click",v),c.footerCloseBtn.addEventListener("click",f)}))}catch(e){console.log(e)}finally{(0,d.spinnerStop)()}function y(){return g.apply(this,arguments)}function g(){return g=e(a)(e(i).mark((function t(){var r;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c.library.innerHTML="",r=(0,p.get)(m.WATCH_KEY),r.map((function(e){return e.id})).forEach(function(){var t=e(a)(e(i).mark((function t(r){var n,o;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.fetchMovieById(r);case 2:n=e.sent,(o=n.genres.map((function(e){return e.name}))).length>2&&o.splice(2,o.length-1,"Other"),0===o.length&&o.push("Other"),c.library.insertAdjacentHTML("beforeend",(0,s.renderMarkup)(n,o.join(", "))),c.library.lastElementChild.setAttribute("data-status","watched");case 8:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}function b(){return b=e(a)(e(i).mark((function t(){var r;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c.library.innerHTML="",r=(0,p.get)(m.QUEUE_KEY),r.map((function(e){return e.id})).forEach(function(){var t=e(a)(e(i).mark((function t(r){var n,o;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.fetchMovieById(r);case 2:n=e.sent,(o=n.genres.map((function(e){return e.name}))).length>2&&o.splice(2,o.length-1,"Other"),0===o.length&&o.push("Other"),c.library.insertAdjacentHTML("beforeend",(0,s.renderMarkup)(n,o.join(", "))),c.library.lastElementChild.setAttribute("data-status","queue");case 8:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}function k(){return(k=e(a)(e(i).mark((function t(r){var n,o,a,c,s;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.target.closest(".gallery__item"),e.prev=1,(0,d.spinnerPlay)(),o=n.dataset.id,a=n.dataset.status,console.log(a),e.next=8,m.fetchMovieById(o).then((function(e){var t=e.poster_path?"https://image.tmdb.org/t/p/w300".concat(e.poster_path):"https://astoriamuseums.org/wp-content/uploads/2020/10/OFM-poster-not-available.png",r=new Date(Date.parse(e.release_date)).getFullYear(),n={id:e.id,poster:t,title:e.title,originalTitle:e.original_title,genres:[],popularity:e.popularity,overview:e.overview,vote_average:e.vote_average,vote_count:e.vote_count,release_date:r};e.genres.forEach((function(e){n.genres.push(e.name)})),n.genres=n.genres.join(", "),(0,l.createModalMarkUp)(n)}));case 8:(c=document.querySelector(".lightbox-modal__watched-button")).textContent="Remove from Watched",(s=document.querySelector(".lightbox-modal__queque-button")).textContent="Remove from Queque",c.addEventListener("click",(function(e){var t=e.target.closest(".lightbox-modal").dataset.id;(0,p.removeLocal)(m.WATCH_KEY,t),"watched"===a&&n.remove()})),s.addEventListener("click",(function(e){var t=e.target.closest(".lightbox-modal").dataset.id;(0,p.removeLocal)(m.QUEUE_KEY,t),"queue"===a&&n.remove()})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0);case 19:return e.prev=19,(0,d.spinnerStop)(),e.finish(19);case 22:case"end":return e.stop()}}),t,null,[[1,16,19,22]])})))).apply(this,arguments)}c.watchBtn.addEventListener("click",y),c.queueBtn.addEventListener("click",(function(){return b.apply(this,arguments)})),c.library.addEventListener("click",(function(e){return k.apply(this,arguments)}))}();
//# sourceMappingURL=library.aa6186c1.js.map
